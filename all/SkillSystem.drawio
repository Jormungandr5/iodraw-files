<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36" version="26.2.14">
  <diagram name="第 1 页" id="-2ZJdPU1EGzkgh0zn1c5">
    <mxGraphModel dx="11161" dy="9856" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-1" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot; style=&quot;font-size: 20px;&quot;&gt;SkillManager&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot; face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;public static SkillManager instance&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Skills:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Dash_Skill dask;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Clone_Skill clone;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-990" y="30" width="500" height="290" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="gPpyHjLKl8rGHEcK-XGe-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="gPpyHjLKl8rGHEcK-XGe-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="BzqCn0NFTJxUhRajQsSP-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-6" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;&lt;b&gt;Skill&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;protected float cooldown;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;protected float cooldownTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;// Methods&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;Update()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;virtual void CanUseSkill(); // 如果cooldownTimer &amp;lt; 0, 调用UseSkill();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 15px;&quot;&gt;virtual void UseSkill();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="30" width="470" height="280" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-2" value="&lt;font face=&quot;Comic Sans MS&quot; style=&quot;font-size: 20px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Clone_Skill&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Clone info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private GameObject clonePrefab;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private float cloneDuration;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private bool canAttack;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp;public void CreateClone(Transform _clonePosition)&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp;{&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;GameObject newClone =&lt;span style=&quot;background-color: rgb(241, 255, 57);&quot;&gt; Instantiate&lt;/span&gt;(clonePrefab);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;newClone.GetComponent&amp;lt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;Clone_Skill_Controller&lt;/span&gt;&amp;gt;().&lt;span style=&quot;background-color: rgb(1, 255, 18);&quot;&gt;SetupClone&lt;/span&gt;(_clonePosition, cloneDuration, canAttack);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="-290" y="470" width="540" height="330" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-5" value="&lt;font face=&quot;Comic Sans MS&quot; style=&quot;font-size: 20px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Clone_Skill_Controllers&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237)); font-size: 20px;&quot;&gt;// 挂载在prefab上:&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;制作了一个Clone prefab:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;只挂载了：&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;1.transform组件&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;2.Sprite Render组件&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;3.Animator&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;4.Clone_Skill_Controller(Script)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;没有挂载Rigibody2D组件（不会受重力及其它物理属性影响）&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 20px; background-color: rgb(255, 255, 0);&quot;&gt;也没有Collider2D组件（保证不会让敌人攻击到残影）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;b&gt;&lt;font face=&quot;Georgia&quot;&gt;在PlayerDashState的Enter()函数中，调用Clone_Skill中的CreatClone方法&lt;/font&gt;&lt;/b&gt;时，实例化一个clonePrefab对象newClone，并调用Clone_Skill_Controllers的SetupClone()方法：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;将newClone的位置设置在原地，并且播放对应动画，调整形象面对方向FaceClosestTarget()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;SpriterRenderer sr;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;float cloneTimer;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;//Methods&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Update()&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: rgb(146, 255, 3);&quot;&gt;SetupClone&lt;/span&gt;(Transform _newTransform, float _cloneDuration, bool _canAttack);&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: rgb(162, 255, 3); font-size: 20px;&quot;&gt;FaceClosestTarget()&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="-1130" y="470" width="730" height="890" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" target="gPpyHjLKl8rGHEcK-XGe-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="2150" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="909.75" y="2180" />
              <mxPoint x="304.75" y="2180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-9" target="gPpyHjLKl8rGHEcK-XGe-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="1990" as="sourcePoint" />
            <mxPoint x="494.75" y="2230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="gPpyHjLKl8rGHEcK-XGe-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="2150" as="sourcePoint" />
            <mxPoint x="1240.75" y="2230" as="targetPoint" />
            <Array as="points">
              <mxPoint x="909.75" y="2180" />
              <mxPoint x="1515.75" y="2180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-9" value="&lt;font face=&quot;Comic Sans MS&quot; style=&quot;font-size: 20px;&quot;&gt;&lt;b style=&quot;&quot;&gt;Sword_Skill&amp;nbsp; 通用属性&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Sword info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;public SwordType swordType;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private GameObject swordPrefab;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private Vector2 launchForce;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private float swordGravity;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private float returnSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private freezeTimeDuration;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private Vector2 finalDir;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Aim dots&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;&quot;&gt;&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;private int numberOfDots;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;private float spaceBetweenDots&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;private GameObject dotPrefab;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private Transform dotsParent;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private GameObject[] dots;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;public Vector2 AimDirection(); // 鼠标右键位置 减去 角色位置&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private Vector2 DotsPosition(float t); // 计算每个dot的位置&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;private void GenerateDots(); // 利用prefab实例化dots，生成后先失活&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;DotsActive(bool _isActive);// 激活dots&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;SetupGravity(); // 设置不同种类sword的重力&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;在Update()中，监听 ：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;1. 鼠标右键hold，实时计算点的位置（&lt;b&gt;&lt;font style=&quot;background-color: rgb(26, 255, 87);&quot; face=&quot;Courier New&quot;&gt;在playerAimSwordState的Enter方法中player.skill.sword.DotsActive(true);将dots激活&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;）；&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;2. &lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;松开鼠标右键，计算finalDir；aimSwordState的update中，监听松开鼠标右键，返回idleState；&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;b style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font face=&quot;Georgia&quot;&gt;实际上&lt;/font&gt;&lt;/b&gt;：&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;b&gt;从aimSword状态松开鼠标右键，到throwSword状态&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;b&gt;状态机上：throwSword状态其实就是idleState；&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span&gt;在&lt;span&gt;每次进入aimSword状态时&lt;/span&gt;&lt;/span&gt;，&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;Animator上，aimSword -&amp;gt; throwSword的条件是AimSword = false，在aimSword状态的Exit()方法中，调用base.Exit()时，会将其置为false;故退出&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;aimSword状态时，动画自动进入throwSword；在playerthrowSword中的指定帧，调用CreateSword()方法&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;在PlayerAnimationTrigger类中 ，有ThrowSword方法，在指定动画帧调用该事件，调用&lt;span style=&quot;background-color: transparent;&quot;&gt;SkillManager.instance.sword.CreateSword();方法&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;public void CreateSword(); // 该方法中实例化剑刃，通过&lt;span style=&quot;background-color: transparent;&quot;&gt;Sword_Skill_Controller中的SetupSword方法来对剑刃进行设置，并将dots失活，&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;并且如果SwordType == Bounce; 则在SetupSword方法中调用SetupBounce方法，&lt;b&gt;在SetupBounce方法中将enemyTarget列表重置为null，每次进&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;入bounce时都会将该列表置空，消除上一次剑刃bounce记录的敌人列表&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;CreateSword()方法//&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;在playerthrowSword中的指定帧调用&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;/*&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;1.实例化一把剑newSword&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;2.获得实例化的剑对象newSword上的Sword_Skill_Controller 脚本newSwordScript&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;3.根据剑的类型，调用剑对象上的脚本的方法，对剑的类型参数进行设置，newSwordScript.SetupBounce/Spin/Pierce&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;4. 调用剑对象上的脚本的方法，设置剑的通用属性, newSwordScript.SetupSword();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;5.给player分配一把剑&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;6.在实例化一把剑的同时，将瞄准点路线关闭&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="470" width="1160" height="1590" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-12" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot; face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Bounce&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;// Bounce info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;int bounceAmount; // 反弹次数&lt;/div&gt;&lt;div&gt;float bounceGravity;&lt;/div&gt;&lt;div&gt;bounceSpeed;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SetupBounce&lt;/font&gt;&lt;/b&gt;(true, bounceAmonut, bounceSpeed);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="29.75" y="2390" width="550" height="200" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-23" value="&lt;div&gt;&lt;b&gt;&lt;font&gt;public enum SwordType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Regular,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Bounce,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Pierce,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Spin&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;}&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1090" y="590" width="330" height="200" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-24" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot; face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Pierce&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;// Pierce info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;int pierceAmount; // 可以贯穿敌人的数量&lt;/div&gt;&lt;div&gt;float pierceGravity; // 贯穿剑的重力，贯穿剑的重力更低&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SetupPierce&lt;/font&gt;&lt;/b&gt;(pierceAmount);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="634.75" y="2390" width="550" height="200" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-25" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot; face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Spin&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;// Spin info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;float spinDuration; // 旋转剑留在原地旋转的时间&lt;/div&gt;&lt;div&gt;float spinGravity; // 旋转剑的重力&lt;/div&gt;&lt;div&gt;maxTravelDistance; // 未击中敌人时，旋转剑的最大距离&amp;nbsp;&lt;/div&gt;&lt;div&gt;hitCooldown; //旋转剑留在原地攻击敌人的频率（冷却时间）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; font-size: 16px;&quot;&gt;&lt;b&gt;SetupSpin&lt;/b&gt;&lt;/span&gt;(true, maxTravelDistance, spinDuration, hitCooldown);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1240.25" y="2390" width="550" height="200" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-2" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_Skill&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// values&lt;/div&gt;&lt;div&gt;int amountOfAttacks;&lt;/div&gt;&lt;div&gt;float cloneCooldown;&lt;/div&gt;&lt;div&gt;float blackholeDuration; // 黑洞持续时间&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;GameObject blackholePrefab;&lt;/div&gt;&lt;div&gt;float maxSize;&lt;/div&gt;&lt;div&gt;float growSpeed;&lt;/div&gt;&lt;div&gt;float shrinkSpeed;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Blackhole_Skill_Controller currentBlackhole; // 当前blackhole上的控制脚本&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CanUseKill();&lt;/div&gt;&lt;div&gt;UseSkill();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;实例化一个newBlackhole;&lt;/div&gt;&lt;div&gt;调用newBlackhole上挂载的Blackhole_Skill_Controller脚本的SetupBlackhole()方法&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;SkillCompleted();&lt;/div&gt;&lt;div&gt;// 如果没有currentBlackhole，即还没有实例化 or currentBlackhole.playerCanExitState = false，return false;&lt;/div&gt;&lt;div&gt;否则return true，并将currentBlackhole 置空&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="960" y="-914" width="1090" height="660" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-5" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_Skill_Controller&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Values&lt;/div&gt;&lt;div&gt;bool playerCanDisappear;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;List&amp;lt;Transform&amp;gt; targets;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;public void AddEnemyToList(Transform _enemyTransform) =&amp;gt; targets.Add(_enemyTransform);// 向hotkeyController提供添加敌人列表方法&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Blackhole相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;float blackholeTimer;&lt;/div&gt;&lt;div&gt;float maxSize;&lt;/div&gt;&lt;div&gt;float growSpeed;&lt;/div&gt;&lt;div&gt;float shrinkSpeed;&lt;/div&gt;&lt;div&gt;bool canGrow;&lt;/div&gt;&lt;div&gt;bool canShrink;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;bool playerCanExitState;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;SetupBlackhole();// 设置blackhole的maxSize, growSpeed, shrinkSpeed, amountOfAttacks, cloneAttackCooldown, blackholeTimer;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;FinishBlackHoleAbility();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.DestroyHotKeys(); // 删除热键&lt;/div&gt;&lt;div&gt;2.令playerCanExitState = true; //将退出黑洞状态&lt;/div&gt;&lt;div&gt;3.canShrink = true; // 黑洞收缩&lt;/div&gt;&lt;div&gt;4.cloneAttackReleased = false; //此时不能进行克隆攻击&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Clone（制作克隆体）相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;bool cloneAttackReleased;&lt;/div&gt;&lt;div&gt;int amountOfAttacks; // 黑洞技能中，能攻击敌人的数量&lt;/div&gt;&lt;div&gt;float cloneAttackCooldown;&lt;/div&gt;&lt;div&gt;float cloneAttackTimer; // 召唤克隆体攻击的cd，本质上是给克隆攻击动画足够的时间，等当前克隆攻击动画完成了再生成下一个克隆&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// &lt;b&gt;Methods()&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;void ReleaseCloneAttack(); // 准备释放CloneAttack（适用于黑洞产生热键时间结束/玩家按下R键调用）&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 如果没有攻击目标，return;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.DestroyHotKeys()；&lt;/div&gt;&lt;div&gt;3.令cloneAttackReleased = true;&lt;/div&gt;&lt;div&gt;4.令canCreateHotKeys = false; 此时已经在执行对Enemy列表中的敌人攻击的逻辑，如果有新的敌人进入黑洞范围不会再生成热键；&lt;/div&gt;&lt;div&gt;5. 在执行攻击逻辑时，如果playerCanDisappear = true；则执行将player“隐身”的逻辑：&lt;/div&gt;&lt;div&gt;&lt;div&gt;PlayerManager.instance.player.MakeTransparent(true);&lt;/div&gt;&lt;div&gt;playerCanDisappear = false;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;void&amp;nbsp;CloneAttackLogic(); // 执行CloneAttack的逻辑&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;在Update()中调用该方法：（这里update就相当于循环调用该方法）&lt;/div&gt;&lt;div&gt;如果cloneAttackTimer &amp;lt; 0 &amp;amp;&amp;amp; cloneAttackReleased &amp;amp;&amp;amp; amountOfAttacks &amp;gt; 0;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cloneAttackTimer = cloneAttackCooldown;&lt;/div&gt;&lt;div&gt;在Enemy 列表 targets中，随机获取一个下标randomIndex，得到对应敌人的transform，在该敌人的transform左侧/右侧生成克隆体，调用SkillManager.instance.clone.CreateClone()方法，amountOfAttacks--;&lt;/div&gt;&lt;div&gt;如果&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;amountOfAttacks &amp;lt; 0, 1s后调用&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;FinishBlackHoleAbility()方法&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Invoke(&quot;FinishBlackHoleAbility&quot;, 1f);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;Q:这里有问题，随机获取下标是否会重复？&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//HotKey（生成热键）相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;float headOffset;&lt;/div&gt;&lt;div&gt;bool canCreateHotkeys;&lt;/div&gt;&lt;div&gt;GameObject hotKeyPrefab;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;List&amp;lt;GameObject&amp;gt; createdHotKey; // 用来存放生成的HotKey列表&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;List&amp;lt;KeyCode&amp;gt; KeyCodeList; /*&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;这是一个存储了设置的HotKey的List，在为每个blackhole内的敌人生成热键时，&lt;/div&gt;&lt;div&gt;随机从该List中取出一个元素作为hotkey的key在敌人的头顶生成，并且将该元素从List中删除&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;void CreateHotKey();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 如果KeyCodeList.Count &amp;lt;= 0 || &lt;b&gt;cloneAttackReleased &lt;/b&gt;|| !&lt;b&gt;canCreateHotKeys&lt;/b&gt;， return;&lt;/div&gt;&lt;div&gt;2. 实例化一个GameObject newHotKey;并将其加入createdHotKey List;&lt;/div&gt;&lt;div&gt;3. 从设置好的KeyCodeList 中随机选择一个元素。作为HotKey的key，并从KeyCodeList中将该元素remove;&lt;/div&gt;&lt;div&gt;4. 调用生成HotKey上的SetupHotKey()方法;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 减少定时器cloneAttackTimer 和 blackholeTimer&lt;/div&gt;&lt;div&gt;2. 如果blackholeTimer &amp;lt; 0，则黑洞技能时间结束&lt;/div&gt;&lt;div&gt;将blackholeTimer = Infinity,（防止再次进入此条件）&lt;/div&gt;&lt;div&gt;在黑洞时间结束的情况下：&lt;/div&gt;&lt;div&gt;2.1 用户输入了攻击目标，调用ReleaseCloneAttack()方法；&lt;/div&gt;&lt;div&gt;2.2 没有攻击目标，调用FinishBlackHoleAbility()方法，结束技能；&lt;/div&gt;&lt;div&gt;3. 如果玩家按下了R键，调用&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;ReleaseCloneAttack()方法；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;4. 在一帧中调用CloneAttackLogic()方法，满足攻击体条件的逻辑在函数内部；&lt;/div&gt;&lt;div&gt;5.如果canGrow &amp;amp;&amp;amp; !canShrink，黑洞放大&lt;/div&gt;&lt;div&gt;6. 如果canShrink = true, 黑洞缩小，最后删除黑洞&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;OnTriggerEnter2D(); 将blackhole上的circle collider勾选isTrigger属性，当与其它碰撞体发生碰撞时触发&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;如果是Enemy的碰撞体：&lt;/div&gt;&lt;div&gt;调用该Enemy的FreezeTime方法&lt;/div&gt;&lt;div&gt;调用CreateHotKey(collision);&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;OnTriggerExit2D()：当其它碰撞体退出blackhole的碰撞体时触发&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;// 结束黑洞范围内被冻结的敌人的冻结状态&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1600" y="-4430" width="1090" height="2820" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-6" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_HotKey_Controller&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;SetupHotKey();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.获取HotKey上的SpriteRenderer；&lt;/div&gt;&lt;div&gt;2.获取&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;HotKey孩子上的&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;TextMeshProUGUI组件（用来显示文字）text；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;3. 设置&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_myHotKey属性，并将&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_myHotKey作为文字用text显示&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;4. 设置_myEnemy属性（这是该hotKey对应的敌人的transform）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;5.获取&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Blackhole_Skill_Controller脚本&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_blackhole&lt;/span&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Update();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;在Update函数中，如果玩家按下了HotKey键，则通过blackhole对象，调用blackhole.AddEnemyToList(myEnemy)方法，&lt;/div&gt;&lt;div&gt;将该敌人添加到要攻击的敌人列表中;&lt;/div&gt;&lt;div&gt;并将HotKey隐藏不显示&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="320" y="-1980" width="1090" height="660" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-2" value="在PlayerBlackholeState中，&lt;div&gt;1.Enter()方法&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.skillUsed = false;&lt;/div&gt;&lt;div&gt;2. 保存当前重力，并将player.rb,gravityScale 置零；&lt;/div&gt;&lt;div&gt;3.将stateTimer 设为flyTime;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;" vertex="1" parent="1">
          <mxGeometry x="2200" y="-820" width="400" height="256" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-43" value="&lt;div&gt;&lt;b&gt;在playerGroundedState的Update中监听&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;if (Input.GetKeyDown(KeyCode.Mouse1) &amp;amp;&amp;amp; HasNoSword())&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; stateMachine.ChangeState(player.aimSwordState);&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;// 在HasNoSword()中，如果!player.sword,返回true;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;否则，调用&lt;/b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;Sword_Skill_Controller实例中的&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;ReturnSword()方法&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="1370" y="950" width="560" height="260" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-48" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="3020" y="-4170" width="2960" height="2170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-46" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-48">
          <mxGeometry width="2960" height="2170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-44" value="" style="group" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-48">
          <mxGeometry x="170" y="320" width="2665" height="1630" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-1" value="在ReleaseCloneAttack()中，将canCreateHotKeys = false；这样此时即使触发OnTriggerEnter2D()，调用CreateHotKey()方法，也不会创建hotkey()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="55" y="510" width="505" height="210" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-3" target="B_nVN4fboFG4_9kOqA88-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-3" value="在Blackhole_skill_controller的update()中的逻辑：&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="525" width="580" height="292" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-6" target="B_nVN4fboFG4_9kOqA88-23">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-22" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-19">
          <mxGeometry x="0.1752" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-6" value="玩家按下R键?&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="642.5" y="680" width="345" height="128" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-10" target="B_nVN4fboFG4_9kOqA88-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-15" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-12">
          <mxGeometry x="0.5806" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1295" y="460.58823529411757" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-14" value="Yes" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-13">
          <mxGeometry x="-0.1055" y="-1" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-10" value="&lt;font&gt;blackholeTimer &amp;lt; 0？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="630" y="400" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-17" target="B_nVN4fboFG4_9kOqA88-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-30" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontStyle=1;fontSize=20;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-29">
          <mxGeometry x="-0.2136" y="3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-17" value="&lt;font&gt;targets 列表中是否有敌人&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="1275" y="400" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-18" target="B_nVN4fboFG4_9kOqA88-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-18" target="B_nVN4fboFG4_9kOqA88-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-35" value="Invoke()&lt;div&gt;这里由于使用Invoke()延迟一秒后调用&lt;/div&gt;&lt;div&gt;Finish方法，导致在攻击完成后等待一秒后才会销毁黑洞&lt;/div&gt;&lt;div&gt;如果此时按下R键，会再次将角色隐身bug&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-34">
          <mxGeometry x="0.0632" y="-5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-18" value="ReleaseCloneAttack();&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;if (targets.Count &amp;lt;= 0)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;DestroyHotKeys();&lt;/div&gt;&lt;div&gt;&amp;nbsp;cloneAttackReleased = true;&lt;/div&gt;&lt;div&gt;canCreateHotKeys = false;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="1265" y="620" width="390" height="250" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1295" y="740.5882352941176" as="targetPoint" />
            <mxPoint x="1000" y="740" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-21" value="Yes" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-20">
          <mxGeometry x="-0.1055" y="-1" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-23" target="B_nVN4fboFG4_9kOqA88-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="1105" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-23" target="B_nVN4fboFG4_9kOqA88-31">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="815" y="1630" />
              <mxPoint x="2525" y="1630" />
              <mxPoint x="2525" y="784" />
              <mxPoint x="2520" y="784" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-41" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;amountOfAttacks &amp;lt;= 0&lt;/font&gt;&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-40">
          <mxGeometry x="-0.1135" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-23" value="CloneAttackLogic()；&lt;div&gt;if (cloneAttackTimer &amp;lt; 0 &amp;amp;&amp;amp; cloneAttackReleased &amp;amp;&amp;amp; amountOfAttacks &amp;gt; 0 &amp;amp;&amp;amp; targets.Count &amp;gt; 0), 才执行逻辑&lt;/div&gt;&lt;div&gt;即不在cloneAttack冷却时间、cloneAttack释放了、&lt;/div&gt;&lt;div&gt;攻击次数&amp;gt;0、&lt;/div&gt;&lt;div&gt;敌人列表数量大于0（每次制造一个clone后从列表中删除该敌人）;&lt;/div&gt;&lt;div&gt;满足条件执行内部逻辑时，将blackholeTimer 设为正无穷，即不在计算黑洞计时器，由cloneAttack执行完后使用Invoke结束黑洞逻辑&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="660" y="1042" width="310" height="428" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-28" value="Shrink or Grow" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry y="1211" width="310" height="90" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-31" value="FinishBlackHoleAbility();" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="2375" y="728" width="290" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" edge="1" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-17" target="B_nVN4fboFG4_9kOqA88-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-33" value="No" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-32">
          <mxGeometry x="-0.2716" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-47" value="Blackhole_skill_controller Logic" style="rounded=0;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-44">
          <mxGeometry x="1500" y="-130" width="880" height="200" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-65" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="2290" y="-150" width="4590" height="4450" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-49" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-65">
          <mxGeometry width="4590" height="4450" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-61" value="" style="group" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-65">
          <mxGeometry x="370" y="230" width="3570" height="4070" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-26" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Pierce&lt;/font&gt;&lt;/b&gt; info&lt;/font&gt;&lt;div&gt;&lt;font&gt;int pierceAmount;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;//Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;SetupPierce();&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-61" vertex="1">
          <mxGeometry y="1564.5430107526881" width="494.04389983093216" height="470.4569892473118" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-60" value="" style="group" vertex="1" connectable="0" parent="B_nVN4fboFG4_9kOqA88-61">
          <mxGeometry x="435.0954799647414" width="3134.9045200352584" height="4069.9999999999995" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-10" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Sword_Skill_Controllers 通用属性&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;/* 挂载在prefab上&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;prefab上挂载了Rigidbody2D&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;CircleCollider2D&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Animator anim;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Rigidbody2D rb;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private CircleCollider2D cd;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Player player;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int returnSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool canRotate;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool isReturining;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;float freezeTimeDuration;// 敌人被sword击中后停滞的时间&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;//Methods&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;spacingTop=-500;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry width="1195.8220312703206" height="1269.1397849462364" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-28" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-28" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Bounce&lt;/font&gt;&lt;/b&gt;&amp;nbsp;info&lt;/font&gt;&lt;div&gt;&lt;font&gt;float bounceSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool isBouncing; // 是否是反弹剑&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int bounceAmount;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;float bounceRadius;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;List&amp;lt;Transform&amp;gt; enemyTarget&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int TargetIndex;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;SetupBounce();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;给bounce的各种属性赋值；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enemyTarget = new List&amp;lt;Transform&amp;gt;()&lt;br&gt;给enemyTarget赋空值；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="317.1986402323599" y="1564.5430107526881" width="561.4135225351502" height="481.39784946236557" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-29" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-29" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Spin&lt;/font&gt;&lt;/b&gt;&amp;nbsp;info&lt;/font&gt;&lt;div&gt;&lt;span&gt;float maxTravelDistance;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinTimer;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinRadius;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinDirection;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float hitTimerl&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float hitCooldown;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bool wasStopped;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bool isSpinning; // 是否是旋转剑&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//Methods&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;SetupSpin();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;给isSpining/maxTravelDistance/spinDuration/hitCooldown赋值&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="1013.3514081759461" y="1564.5430107526881" width="752.2941201971013" height="470.4569892473118" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="418.2530742886869" y="2899.327956989247" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-60" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-32" value="&lt;font&gt;//Methods&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;void OnTrrigerEnter2D(Collider2D collision)&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;/*&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;1. 如果isReturning = true, 直接return;返回时撞到敌人不做处理;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;2. 如果不是sword返回状态，调用&lt;/b&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SwordSkillDamage()方法;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;更正：&lt;font color=&quot;#ba0000&quot;&gt;如果是撞到敌人 ：&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ba0000&quot;&gt;调用SwordSkillDamage()方法；&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ba0000&quot;&gt;如果是isBouncing &amp;amp;&amp;amp;&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font color=&quot;#ba0000&quot; face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;enemyTarget.Count &amp;lt;= 0// 如果是bounceSword并且第一次撞到敌人：&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font color=&quot;#ba0000&quot; face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;调用SetupTargetsForBounce(); // 为bounceSword寻找敌人列表（在原作者该函数中删除这段逻辑）&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;3. 调用&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SetupTargetsForBounce(collision); // 为bounceSword寻找敌人列表&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span&gt;&lt;b&gt;4. 调用&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;StuckInto(collision);&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;*/&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果canRotate = true; 保持让剑的transform.right = rb.velocity;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果isReturning = true; 执行返回剑的逻辑（移动 &amp;amp;&amp;amp; 接近player时回收）&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 如果是bounceSword，并且敌人列表中对象大于1，调用&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;BounceLogic()&lt;/font&gt;&lt;/b&gt;方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;4. 否则不是bounceSword，如果是spinSword, 调用&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;SpinLogic()&lt;/font&gt;&lt;/b&gt;方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="47.72014941548777" y="2450.752688172043" width="1096.1599027498808" height="722.0967741935483" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-40" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;BounceSword&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span&gt;&lt;b&gt;SetupTargetsForBounce()&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;/* 如果isBouncing == true &amp;amp;&amp;amp; enemyTarget &amp;lt;= 0 ： 当前enemyTarget list中没有对象, 来判断反弹剑是否是第一次碰撞到敌人，因为每次在设置剑类型为反弹剑时会将敌人列表清空 */ &lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;修正：上面&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;将剑的bounceRadius范围内的敌人Add到&lt;/font&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;enemyTarget&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp; List（无序的）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;BounceLogic()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1. 在update中调用时,让sword的从当前位置向当前敌人List中索引为&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;targetIndex的敌人位置移动；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;2. 如果到达了该敌人位置，则调用&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;SwordSkillDamage()方法，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;targetIndex++ &amp;amp;&amp;amp; bounceAmount--;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;如果 bounceAmount = 0 :&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;isBouncing = false &amp;amp;&amp;amp; isReturning = true; 返回Sword；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;否则，如果列表遍历完一次，继续从头遍历列表&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="180.35970824964247" y="3347.9032258064512" width="830.8920133520223" height="579.8655913978495" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-41" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;private void StuckInto(Collider2D collision)&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果是pierceSword，并且pierceAmount &amp;gt; 0;则将pierceAmount 减一，&lt;b&gt;然后return;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果是spinSword，（不可能是pierceSword），调用StopWhenSpinning(); 让spinSword在攻击到第一个enemy时停在原地; &lt;b&gt;然后return&lt;/b&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 有以下可能：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3.1 是pierceSword，已经贯穿了pierceAmount个敌人，此时pierceAmount = 0；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3.2 不是pierceSword也不是spinSword，则可能是bounceSword/regularSword;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;此时，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（1）.将canRotate = false; 让剑的右侧不再一直指向剑的速度方向;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（2）.将剑的rigibody2D失活，让剑的碰撞体失活;这样以后不会再检测到剑攻击到敌人/墙体&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（3）.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;将剑的刚体设为Kinematic运动学刚体，不受重力、碰撞等影响，只受代码控制&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;（4）. 停滞剑的一切动作&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;4. 如果是反弹剑，并且敌人列表数量大于1，则return; 这样不会执行后序让剑停止旋转的动画&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;5. 否则，如果不是反弹剑/ 是反弹剑但是敌人列表数量小于等于1，则退出剑旋转动画;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;6. 将剑的parent设为攻击到的敌人，让剑跟随敌人一切移动&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="1325.6320659508979" y="2523.235887096774" width="1347.3924540843605" height="577.130376344086" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-43" value="&lt;div&gt;&lt;span&gt;public void SetupSword(Vector2 _dir, float _gravityScale)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;rb.velocity = _dir;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;rb.gravityScale = _gravityScale;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;};&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="103.86150166900279" y="579.8655913978495" width="370.53292487319914" height="218.81720430107526" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-44" value="&lt;div&gt;&lt;span&gt;DestryoMe();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ReturnSword(); // 停止剑的rigidbody2D；让剑重新失去parent;isReturning = true;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="687.731565105559" y="503.2795698924731" width="443.5166828027687" height="191.46505376344084" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-45" value="&lt;div&gt;&lt;span&gt;SetupSword();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1.给剑的各种公共属性赋值&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2.如果是pierce，会有pierceAmount &amp;gt; 0;此时剑不需要旋转，则在pierceAmount &amp;lt;= 0时，让剑切换到旋转动画&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;3.计算SpinDirection;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="597.905401499935" y="722.0967741935483" width="561.4135225351502" height="251.63978494623655" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-46" value="&lt;div&gt;&lt;span&gt;SwordSkillDamage(enemy);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// 调用enemy.Damage()方法，启用协程&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;enemy.StartCoroutine(&quot;FreezeTimerFor&quot;, freezeTimeDuration);使敌人停滞&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="25.26360851408176" y="919.0322580645161" width="437.9025475774172" height="147.7016129032258" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-47" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;span&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;onTriggerEnter2D();&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="676.503294654856" y="1028.4408602150536" width="314.3915726196841" height="172.31854838709677" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-49" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SpinSword&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;SpinLogic&lt;/span&gt;()&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;/*&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果player的位置和sword的位置超过了maxTravelDistance &amp;amp;&amp;amp; !wasStopped剑没有停下来，调用StopWhenSpinning()方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果当前Sword已经停止（wasStopped = true），则每帧减少spinTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;如果spinTimer &amp;lt; 0：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;设置isReturning = true &amp;amp;&amp;amp; isSpinning = false;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 更新中每帧减少hitTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;如果hitTimer &amp;lt; 0; 将hitTimer重置为hitCooldown;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;对在Sword的spinRadius范围内的敌人调用&lt;span style=&quot;background-color: transparent;&quot;&gt;SwordSkillDamage()方法;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;注意对于spinSword，在&lt;/span&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-family: &amp;quot;Comic Sans MS&amp;quot;;&quot;&gt;StuckInto()方法中碰撞到敌人时不会将Rigidbody失活&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-family: &amp;quot;Comic Sans MS&amp;quot;;&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;StopWhenSpinning()&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;1. 设置wasStopped = true;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;2. 凝滞Sword的Rigidbody2D;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;3. 如果&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;spinTimer &amp;lt; 0; 设置&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;spinTimer = spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;注意：只有spinSword刚进入停留在原地状态时，更新spinTimer 为spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-60" vertex="1">
          <mxGeometry x="1325.6320659508979" y="3358.844086021505" width="1178.9683973238155" height="711.1559139784946" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-50" value="Sword_Skill_Controller Logic" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="B_nVN4fboFG4_9kOqA88-60">
          <mxGeometry x="2314.9045200352584" y="430" width="820" height="170" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-61" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-61" source="gPpyHjLKl8rGHEcK-XGe-26" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
