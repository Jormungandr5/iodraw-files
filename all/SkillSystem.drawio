<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36" version="27.0.9">
  <diagram name="第 1 页" id="-2ZJdPU1EGzkgh0zn1c5">
    <mxGraphModel dx="3332" dy="9097" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-1" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;SkillManager&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;public static SkillManager instance&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Skills:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;Dash_Skill dask;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;Clone_Skill clone;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;Blackhole_Skill blackhole;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;Sword_Skill sword;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;Crystal_Skill crystal;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="-740" y="-120" width="500" height="330" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="gPpyHjLKl8rGHEcK-XGe-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="gPpyHjLKl8rGHEcK-XGe-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-6" target="BzqCn0NFTJxUhRajQsSP-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-6" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span&gt;&lt;b&gt;Skill&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;protected float cooldown;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;protected float cooldownTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;protected Player player;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// Methods&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Start()中：&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;player = PlayerManager.instance.player;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Update()中：&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cooldownTimer -= Time.deltaTime;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;public virtual bool CanUseSkill(); // 如果cooldownTimer &amp;lt; 0, 调用UseSkill();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;public&amp;nbsp;&lt;/span&gt;&lt;span&gt;virtual void UseSkill();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;protected virtual Transform FindClosestEnemy(Transform _checkTransform);&lt;/div&gt;&lt;div&gt;// 返回最近Enemy的Transform&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fillColor=#f8cecc;gradientColor=#ea6b66;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="50" y="-170" width="760" height="480" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-2" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Clone_Skill&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Clone info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private GameObject clonePrefab;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private float cloneDuration;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private bool canAttack;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;public void CreateClone(Transform _clonePosition)&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp;{&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;GameObject newClone =&lt;span style=&quot;background-color: rgb(241, 255, 57);&quot;&gt; Instantiate&lt;/span&gt;(clonePrefab);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;newClone.GetComponent&amp;lt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;Clone_Skill_Controller&lt;/span&gt;&amp;gt;().&lt;span style=&quot;background-color: rgb(1, 255, 18);&quot;&gt;SetupClone&lt;/span&gt;(_clonePosition, cloneDuration, canAttack);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="-300" y="630" width="540" height="330" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-5" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Clone_Skill_Controllers&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;// 挂载在prefab上:&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;制作了一个Clone prefab:&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;只挂载了：&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;1.transform组件&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;2.Sprite Render组件&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;3.Animator&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;4.Clone_Skill_Controller(Script)&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;&lt;font&gt;没有挂载Rigibody2D组件（不会受重力及其它物理属性影响）&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;也没有Collider2D组件（保证不会让敌人攻击到残影）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Georgia&quot;&gt;在PlayerDashState的Enter()函数中，调用Clone_Skill中的CreatClone方法&lt;/font&gt;&lt;/b&gt;时，实例化一个clonePrefab对象newClone，并调用Clone_Skill_Controllers的SetupClone()方法：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;将newClone的位置设置在原地，并且播放对应动画，调整形象面对方向FaceClosestTarget()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;SpriterRenderer sr;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;float cloneTimer;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;//Methods&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;Update()&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;&lt;span style=&quot;background-color: rgb(146, 255, 3);&quot;&gt;SetupClone&lt;/span&gt;(Transform _newTransform, float _cloneDuration, bool _canAttack);&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: rgb(162, 255, 3);&quot;&gt;FaceClosestTarget()&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="-1130" y="470" width="730" height="890" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" target="gPpyHjLKl8rGHEcK-XGe-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="2150" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="909.75" y="2180" />
              <mxPoint x="304.75" y="2180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="gPpyHjLKl8rGHEcK-XGe-9" target="gPpyHjLKl8rGHEcK-XGe-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="1990" as="sourcePoint" />
            <mxPoint x="494.75" y="2230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="gPpyHjLKl8rGHEcK-XGe-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="909.75" y="2150" as="sourcePoint" />
            <mxPoint x="1240.75" y="2230" as="targetPoint" />
            <Array as="points">
              <mxPoint x="909.75" y="2180" />
              <mxPoint x="1515.75" y="2180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-9" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Sword_Skill&amp;nbsp; 通用属性&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Sword info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;public SwordType swordType;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private GameObject swordPrefab;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private Vector2 launchForce;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private float swordGravity;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private float returnSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private freezeTimeDuration;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private Vector2 finalDir;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Aim dots&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;&lt;font&gt;&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;private int numberOfDots;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;private float spaceBetweenDots&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;private GameObject dotPrefab;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private Transform dotsParent;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private GameObject[] dots;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;public Vector2 AimDirection(); // 鼠标右键位置 减去 角色位置&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private Vector2 DotsPosition(float t); // 计算每个dot的位置&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;private void GenerateDots(); // 利用prefab实例化dots，生成后先失活&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;DotsActive(bool _isActive);// 激活dots&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;SetupGravity(); // 设置不同种类sword的重力&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;在Update()中，监听 ：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 鼠标右键hold，实时计算点的位置（&lt;b&gt;&lt;font face=&quot;Courier New&quot; style=&quot;background-color: rgb(26, 255, 87);&quot;&gt;在playerAimSwordState的Enter方法中player.skill.sword.DotsActive(true);将dots激活&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;）；&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;2. &lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;松开鼠标右键，计算finalDir；aimSwordState的update中，监听松开鼠标右键，返回idleState；&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;&lt;b style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font face=&quot;Georgia&quot;&gt;实际上&lt;/font&gt;&lt;/b&gt;：&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;b&gt;从aimSword状态松开鼠标右键，到throwSword状态&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font&gt;&lt;b&gt;状态机上：throwSword状态其实就是idleState；&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font&gt;&lt;span&gt;在&lt;span&gt;每次进入aimSword状态时&lt;/span&gt;&lt;/span&gt;，&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;Animator上，aimSword -&amp;gt; throwSword的条件是AimSword = false，在aimSword状态的Exit()方法中，调用base.Exit()时，会将其置为false;故退出&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;aimSword状态时，动画自动进入throwSword；在playerthrowSword中的指定帧，调用CreateSword()方法&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;在PlayerAnimationTrigger类中 ，有ThrowSword方法，在指定动画帧调用该事件，调用&lt;span style=&quot;background-color: transparent;&quot;&gt;SkillManager.instance.sword.CreateSword();方法&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;public void CreateSword(); // 该方法中实例化剑刃，通过&lt;span style=&quot;background-color: transparent;&quot;&gt;Sword_Skill_Controller中的SetupSword方法来对剑刃进行设置，并将dots失活，&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;并且如果SwordType == Bounce; 则在SetupSword方法中调用SetupBounce方法，&lt;b&gt;在SetupBounce方法中将enemyTarget列表重置为null，每次进&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;入bounce时都会将该列表置空，消除上一次剑刃bounce记录的敌人列表&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;CreateSword()方法//&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;在playerthrowSword中的指定帧调用&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;1.实例化一把剑newSword&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;2.获得实例化的剑对象newSword上的Sword_Skill_Controller 脚本newSwordScript&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;3.根据剑的类型，调用剑对象上的脚本的方法，对剑的类型参数进行设置，newSwordScript.SetupBounce/Spin/Pierce&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;4. 调用剑对象上的脚本的方法，设置剑的通用属性, newSwordScript.SetupSword();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;5.给player分配一把剑&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;6.在实例化一把剑的同时，将瞄准点路线关闭&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="319.75" y="630" width="1160" height="1590" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-12" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Bounce&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font&gt;// Bounce info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;int bounceAmount; // 反弹次数&lt;/div&gt;&lt;div&gt;float bounceGravity;&lt;/div&gt;&lt;div&gt;bounceSpeed;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font&gt;SetupBounce&lt;/font&gt;&lt;/b&gt;(true, bounceAmonut, bounceSpeed);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="29.75" y="2390" width="550" height="260" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-23" value="&lt;div&gt;&lt;b&gt;&lt;font&gt;public enum SwordType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Regular,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Bounce,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Pierce,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp; &amp;nbsp; Spin&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;}&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1090" y="590" width="330" height="200" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-24" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Pierce&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font&gt;// Pierce info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;int pierceAmount; // 可以贯穿敌人的数量&lt;/div&gt;&lt;div&gt;float pierceGravity; // 贯穿剑的重力，贯穿剑的重力更低&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font&gt;SetupPierce&lt;/font&gt;&lt;/b&gt;(pierceAmount);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="624.75" y="2390" width="550" height="260" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-25" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;swordType = SwordType.Spin&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font&gt;// Spin info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;float spinDuration; // 旋转剑留在原地旋转的时间&lt;/div&gt;&lt;div&gt;float spinGravity; // 旋转剑的重力&lt;/div&gt;&lt;div&gt;maxTravelDistance; // 未击中敌人时，旋转剑的最大距离&amp;nbsp;&lt;/div&gt;&lt;div&gt;hitCooldown; //旋转剑留在原地攻击敌人的频率（冷却时间）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;SetupSpin&lt;/b&gt;&lt;/span&gt;(true, maxTravelDistance, spinDuration, hitCooldown);// 设置bounceSword的相关参数&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1240.25" y="2390" width="550" height="260" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-2" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_Skill&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// values&lt;/div&gt;&lt;div&gt;int amountOfAttacks;&lt;/div&gt;&lt;div&gt;float cloneCooldown;&lt;/div&gt;&lt;div&gt;float blackholeDuration; // 黑洞持续时间&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;GameObject blackholePrefab;&lt;/div&gt;&lt;div&gt;float maxSize;&lt;/div&gt;&lt;div&gt;float growSpeed;&lt;/div&gt;&lt;div&gt;float shrinkSpeed;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Blackhole_Skill_Controller currentBlackhole; // 当前blackhole上的控制脚本&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CanUseKill();&lt;/div&gt;&lt;div&gt;UseSkill();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;实例化一个newBlackhole;&lt;/div&gt;&lt;div&gt;调用newBlackhole上挂载的Blackhole_Skill_Controller脚本的SetupBlackhole()方法&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;SkillCompleted();&lt;/div&gt;&lt;div&gt;// 如果没有currentBlackhole，即还没有实例化 or currentBlackhole.playerCanExitState = false，return false;&lt;/div&gt;&lt;div&gt;否则return true，并将currentBlackhole 置空&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="960" y="-914" width="1090" height="660" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-5" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_Skill_Controller&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Values&lt;/div&gt;&lt;div&gt;bool playerCanDisappear;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;List&amp;lt;Transform&amp;gt; targets;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;public void AddEnemyToList(Transform _enemyTransform) =&amp;gt; targets.Add(_enemyTransform);// 向hotkeyController提供添加敌人列表方法&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Blackhole相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;float blackholeTimer;&lt;/div&gt;&lt;div&gt;float maxSize;&lt;/div&gt;&lt;div&gt;float growSpeed;&lt;/div&gt;&lt;div&gt;float shrinkSpeed;&lt;/div&gt;&lt;div&gt;bool canGrow;&lt;/div&gt;&lt;div&gt;bool canShrink;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;bool playerCanExitState;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;SetupBlackhole();// 设置blackhole的maxSize, growSpeed, shrinkSpeed, amountOfAttacks, cloneAttackCooldown, blackholeTimer;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;FinishBlackHoleAbility();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.DestroyHotKeys(); // 删除热键&lt;/div&gt;&lt;div&gt;2.令playerCanExitState = true; //将退出黑洞状态&lt;/div&gt;&lt;div&gt;3.canShrink = true; // 黑洞收缩&lt;/div&gt;&lt;div&gt;4.cloneAttackReleased = false; //此时不能进行克隆攻击&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Clone（制作克隆体）相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;bool cloneAttackReleased;&lt;/div&gt;&lt;div&gt;int amountOfAttacks; // 黑洞技能中，能攻击敌人的数量&lt;/div&gt;&lt;div&gt;float cloneAttackCooldown;&lt;/div&gt;&lt;div&gt;float cloneAttackTimer; // 召唤克隆体攻击的cd，本质上是给克隆攻击动画足够的时间，等当前克隆攻击动画完成了再生成下一个克隆&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// &lt;b&gt;Methods()&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;void ReleaseCloneAttack(); // 准备释放CloneAttack（适用于黑洞产生热键时间结束/玩家按下R键调用）&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 如果没有攻击目标，return;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.DestroyHotKeys()；&lt;/div&gt;&lt;div&gt;3.令cloneAttackReleased = true;&lt;/div&gt;&lt;div&gt;4.令canCreateHotKeys = false; 此时已经在执行对Enemy列表中的敌人攻击的逻辑，如果有新的敌人进入黑洞范围不会再生成热键；&lt;/div&gt;&lt;div&gt;5. 在执行攻击逻辑时，如果playerCanDisappear = true；则执行将player“隐身”的逻辑：&lt;/div&gt;&lt;div&gt;&lt;div&gt;PlayerManager.instance.player.MakeTransparent(true);&lt;/div&gt;&lt;div&gt;playerCanDisappear = false;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;void&amp;nbsp;CloneAttackLogic(); // 执行CloneAttack的逻辑&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;在Update()中调用该方法：（这里update就相当于循环调用该方法）&lt;/div&gt;&lt;div&gt;如果cloneAttackTimer &amp;lt; 0 &amp;amp;&amp;amp; cloneAttackReleased &amp;amp;&amp;amp; amountOfAttacks &amp;gt; 0;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cloneAttackTimer = cloneAttackCooldown;&lt;/div&gt;&lt;div&gt;在Enemy 列表 targets中，随机获取一个下标randomIndex，得到对应敌人的transform，在该敌人的transform左侧/右侧生成克隆体，调用SkillManager.instance.clone.CreateClone()方法，amountOfAttacks--;&lt;/div&gt;&lt;div&gt;如果&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;amountOfAttacks &amp;lt; 0, 1s后调用&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;FinishBlackHoleAbility()方法&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Invoke(&quot;FinishBlackHoleAbility&quot;, 1f);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;Q:这里有问题，随机获取下标是否会重复？&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//HotKey（生成热键）相关&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;//Values&lt;/b&gt;&lt;/div&gt;&lt;div&gt;float headOffset;&lt;/div&gt;&lt;div&gt;bool canCreateHotkeys;&lt;/div&gt;&lt;div&gt;GameObject hotKeyPrefab;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;List&amp;lt;GameObject&amp;gt; createdHotKey; // 用来存放生成的HotKey列表&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;List&amp;lt;KeyCode&amp;gt; KeyCodeList; /*&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;这是一个存储了设置的HotKey的List，在为每个blackhole内的敌人生成热键时，&lt;/div&gt;&lt;div&gt;随机从该List中取出一个元素作为hotkey的key在敌人的头顶生成，并且将该元素从List中删除&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;void CreateHotKey();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 如果KeyCodeList.Count &amp;lt;= 0 || &lt;b&gt;cloneAttackReleased &lt;/b&gt;|| !&lt;b&gt;canCreateHotKeys&lt;/b&gt;， return;&lt;/div&gt;&lt;div&gt;2. 实例化一个GameObject newHotKey;并将其加入createdHotKey List;&lt;/div&gt;&lt;div&gt;3. 从设置好的KeyCodeList 中随机选择一个元素。作为HotKey的key，并从KeyCodeList中将该元素remove;&lt;/div&gt;&lt;div&gt;4. 调用生成HotKey上的SetupHotKey()方法;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1. 减少定时器cloneAttackTimer 和 blackholeTimer&lt;/div&gt;&lt;div&gt;2. 如果blackholeTimer &amp;lt; 0，则黑洞技能时间结束&lt;/div&gt;&lt;div&gt;将blackholeTimer = Infinity,（防止再次进入此条件）&lt;/div&gt;&lt;div&gt;在黑洞时间结束的情况下：&lt;/div&gt;&lt;div&gt;2.1 用户输入了攻击目标，调用ReleaseCloneAttack()方法；&lt;/div&gt;&lt;div&gt;2.2 没有攻击目标，调用FinishBlackHoleAbility()方法，结束技能；&lt;/div&gt;&lt;div&gt;3. 如果玩家按下了R键，调用&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;ReleaseCloneAttack()方法；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;4. 在一帧中调用CloneAttackLogic()方法，满足攻击体条件的逻辑在函数内部；&lt;/div&gt;&lt;div&gt;5.如果canGrow &amp;amp;&amp;amp; !canShrink，黑洞放大&lt;/div&gt;&lt;div&gt;6. 如果canShrink = true, 黑洞缩小，最后删除黑洞&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;OnTriggerEnter2D(); 将blackhole上的circle collider勾选isTrigger属性，当与其它碰撞体发生碰撞时触发&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;如果是Enemy的碰撞体：&lt;/div&gt;&lt;div&gt;调用该Enemy的FreezeTime方法&lt;/div&gt;&lt;div&gt;调用CreateHotKey(collision);&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;OnTriggerExit2D()：当其它碰撞体退出blackhole的碰撞体时触发&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;// 结束黑洞范围内被冻结的敌人的冻结状态&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1600" y="-4430" width="1090" height="2820" as="geometry" />
        </mxCell>
        <mxCell id="BzqCn0NFTJxUhRajQsSP-6" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Blackhole_HotKey_Controller&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;SetupHotKey();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.获取HotKey上的SpriteRenderer；&lt;/div&gt;&lt;div&gt;2.获取&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;HotKey孩子上的&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;TextMeshProUGUI组件（用来显示文字）text；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;3. 设置&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_myHotKey属性，并将&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_myHotKey作为文字用text显示&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;4. 设置_myEnemy属性（这是该hotKey对应的敌人的transform）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;5.获取&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Blackhole_Skill_Controller脚本&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;_blackhole&lt;/span&gt;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Update();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;在Update函数中，如果玩家按下了HotKey键，则通过blackhole对象，调用blackhole.AddEnemyToList(myEnemy)方法，&lt;/div&gt;&lt;div&gt;将该敌人添加到要攻击的敌人列表中;&lt;/div&gt;&lt;div&gt;并将HotKey隐藏不显示&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="320" y="-1980" width="1090" height="660" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-2" value="在PlayerBlackholeState中，&lt;div&gt;1.Enter()方法&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;1.skillUsed = false;&lt;/div&gt;&lt;div&gt;2. 保存当前重力，并将player.rb,gravityScale 置零；&lt;/div&gt;&lt;div&gt;3.将stateTimer 设为flyTime;&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;" parent="1" vertex="1">
          <mxGeometry x="2140" y="-780" width="400" height="256" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-43" value="&lt;div&gt;&lt;b&gt;在playerGroundedState的Update中监听&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;if (Input.GetKeyDown(KeyCode.Mouse1) &amp;amp;&amp;amp; HasNoSword())&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; stateMachine.ChangeState(player.aimSwordState);&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;// 在HasNoSword()中，如果!player.sword,返回true;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;否则，调用&lt;/b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;Sword_Skill_Controller实例中的&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;ReturnSword()方法&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="1360" y="1080" width="560" height="260" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-48" value="" style="group;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1" connectable="0">
          <mxGeometry x="3020" y="-4170" width="2960" height="2170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-46" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="B_nVN4fboFG4_9kOqA88-48" vertex="1">
          <mxGeometry width="2960" height="2170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-44" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-48" vertex="1" connectable="0">
          <mxGeometry x="170" y="320" width="2665" height="1630" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-1" value="在ReleaseCloneAttack()中，将canCreateHotKeys = false；这样此时即使触发OnTriggerEnter2D()，调用CreateHotKey()方法，也不会创建hotkey()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="55" y="510" width="505" height="210" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-3" target="B_nVN4fboFG4_9kOqA88-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-3" value="在Blackhole_skill_controller的update()中的逻辑：&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="525" width="580" height="292" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-6" target="B_nVN4fboFG4_9kOqA88-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-22" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-19" vertex="1" connectable="0">
          <mxGeometry x="0.1752" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-6" value="玩家按下R键?&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Georgia;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="642.5" y="680" width="345" height="128" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-10" target="B_nVN4fboFG4_9kOqA88-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-15" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-12" vertex="1" connectable="0">
          <mxGeometry x="0.5806" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1295" y="460.58823529411757" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-14" value="Yes" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-13" vertex="1" connectable="0">
          <mxGeometry x="-0.1055" y="-1" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-10" value="&lt;font&gt;blackholeTimer &amp;lt; 0？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="630" y="400" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-17" target="B_nVN4fboFG4_9kOqA88-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-30" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontStyle=1;fontSize=20;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-29" vertex="1" connectable="0">
          <mxGeometry x="-0.2136" y="3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-17" value="&lt;font&gt;targets 列表中是否有敌人&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="1275" y="400" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-18" target="B_nVN4fboFG4_9kOqA88-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-18" target="B_nVN4fboFG4_9kOqA88-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-35" value="Invoke()&lt;div&gt;这里由于使用Invoke()延迟一秒后调用&lt;/div&gt;&lt;div&gt;Finish方法，导致在攻击完成后等待一秒后才会销毁黑洞&lt;/div&gt;&lt;div&gt;如果此时按下R键，会再次将角色隐身bug&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-34" vertex="1" connectable="0">
          <mxGeometry x="0.0632" y="-5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-18" value="ReleaseCloneAttack();&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;if (targets.Count &amp;lt;= 0)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; return;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;DestroyHotKeys();&lt;/div&gt;&lt;div&gt;&amp;nbsp;cloneAttackReleased = true;&lt;/div&gt;&lt;div&gt;canCreateHotKeys = false;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="1265" y="620" width="390" height="250" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1295" y="740.5882352941176" as="targetPoint" />
            <mxPoint x="1000" y="740" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-21" value="Yes" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-20" vertex="1" connectable="0">
          <mxGeometry x="-0.1055" y="-1" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-23" target="B_nVN4fboFG4_9kOqA88-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="815" y="1105" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-23" target="B_nVN4fboFG4_9kOqA88-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="815" y="1630" />
              <mxPoint x="2525" y="1630" />
              <mxPoint x="2525" y="784" />
              <mxPoint x="2520" y="784" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-41" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;amountOfAttacks &amp;lt;= 0&lt;/font&gt;&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="B_nVN4fboFG4_9kOqA88-40" vertex="1" connectable="0">
          <mxGeometry x="-0.1135" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-23" value="CloneAttackLogic()；&lt;div&gt;if (cloneAttackTimer &amp;lt; 0 &amp;amp;&amp;amp; cloneAttackReleased &amp;amp;&amp;amp; amountOfAttacks &amp;gt; 0 &amp;amp;&amp;amp; targets.Count &amp;gt; 0), 才执行逻辑&lt;/div&gt;&lt;div&gt;即不在cloneAttack冷却时间、cloneAttack释放了、&lt;/div&gt;&lt;div&gt;攻击次数&amp;gt;0、&lt;/div&gt;&lt;div&gt;敌人列表数量大于0（每次制造一个clone后从列表中删除该敌人）;&lt;/div&gt;&lt;div&gt;满足条件执行内部逻辑时，将blackholeTimer 设为正无穷，即不在计算黑洞计时器，由cloneAttack执行完后使用Invoke结束黑洞逻辑&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="660" y="1042" width="310" height="428" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-28" value="Shrink or Grow" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry y="1211" width="310" height="90" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-31" value="FinishBlackHoleAbility();" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Georgia;rounded=1;fontStyle=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="2375" y="728" width="290" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-44" source="B_nVN4fboFG4_9kOqA88-17" target="B_nVN4fboFG4_9kOqA88-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-33" value="No" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=1;points=[];fontSize=20;fontStyle=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="B_nVN4fboFG4_9kOqA88-32" vertex="1" connectable="0">
          <mxGeometry x="-0.2716" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-47" value="Blackhole_skill_controller Logic" style="rounded=0;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="B_nVN4fboFG4_9kOqA88-44" vertex="1">
          <mxGeometry x="1500" y="-130" width="880" height="200" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-49" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="3300" y="-1830" width="11000" height="5040" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-123" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="4060" y="-1490" width="3570" height="4069.9999999999995" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-66" value="Text" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="775" y="678" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-26" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Pierce&lt;/font&gt;&lt;/b&gt; info&lt;/font&gt;&lt;div&gt;&lt;font&gt;int pierceAmount;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;//Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;SetupPierce();&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry y="1564.5430107526881" width="494.04389983093216" height="470.4569892473118" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-26" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-10" target="gPpyHjLKl8rGHEcK-XGe-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-10" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Sword_Skill_Controllers 通用属性&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;/* 挂载在prefab上&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;prefab上挂载了Rigidbody2D&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(255, 255, 0);&quot;&gt;CircleCollider2D&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;background-color: light-dark(rgb(255, 255, 0), rgb(237, 237, 237));&quot;&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Animator anim;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Rigidbody2D rb;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private CircleCollider2D cd;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&amp;nbsp;private Player player;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int returnSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool canRotate;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool isReturining;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;float freezeTimeDuration;// 敌人被sword击中后停滞的时间&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;//Methods&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;spacingTop=-500;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="435.09547996474157" width="1195.8220312703206" height="1269.1397849462364" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-28" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-28" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Bounce&lt;/font&gt;&lt;/b&gt;&amp;nbsp;info&lt;/font&gt;&lt;div&gt;&lt;font&gt;float bounceSpeed;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;bool isBouncing; // 是否是反弹剑&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int bounceAmount;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;float bounceRadius;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;List&amp;lt;Transform&amp;gt; enemyTarget&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;int TargetIndex;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;SetupBounce();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;给bounce的各种属性赋值；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enemyTarget = new List&amp;lt;Transform&amp;gt;()&lt;br&gt;给enemyTarget赋空值；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="752.2941201971016" y="1564.5430107526881" width="561.4135225351502" height="481.39784946236557" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-29" target="gPpyHjLKl8rGHEcK-XGe-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-29" value="&lt;font&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Spin&lt;/font&gt;&lt;/b&gt;&amp;nbsp;info&lt;/font&gt;&lt;div&gt;&lt;span&gt;float maxTravelDistance;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinTimer;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinRadius;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float spinDirection;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float hitTimerl&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;float hitCooldown;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bool wasStopped;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bool isSpinning; // 是否是旋转剑&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//Methods&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;SetupSpin();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;给isSpining/maxTravelDistance/spinDuration/hitCooldown赋值&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1448.4468881406874" y="1564.5430107526881" width="752.2941201971013" height="470.4569892473118" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="853.3485542534281" y="2899.327956989247" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-123" source="gPpyHjLKl8rGHEcK-XGe-32" target="gPpyHjLKl8rGHEcK-XGe-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-32" value="&lt;font&gt;//Methods&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;void OnTrrigerEnter2D(Collider2D collision)&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;/*&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;1. 如果isReturning = true, 直接return;返回时撞到敌人不做处理;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;2. 如果不是sword返回状态，调用&lt;/b&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SwordSkillDamage()方法;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;更正：&lt;font color=&quot;#ba0000&quot;&gt;如果是撞到敌人 ：&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ba0000&quot;&gt;调用SwordSkillDamage()方法；&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ba0000&quot;&gt;如果是isBouncing &amp;amp;&amp;amp;&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font color=&quot;#ba0000&quot; face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;enemyTarget.Count &amp;lt;= 0// 如果是bounceSword并且第一次撞到敌人：&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font color=&quot;#ba0000&quot; face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;调用SetupTargetsForBounce(); // 为bounceSword寻找敌人列表（在原作者该函数中删除这段逻辑）&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;3. 调用&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SetupTargetsForBounce(collision); // 为bounceSword寻找敌人列表&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;span&gt;&lt;b&gt;4. 调用&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;StuckInto(collision);&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;*/&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果canRotate = true; 保持让剑的transform.right = rb.velocity;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果isReturning = true; 执行返回剑的逻辑（移动 &amp;amp;&amp;amp; 接近player时回收）&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 如果是bounceSword，并且敌人列表中对象大于1，调用&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;BounceLogic()&lt;/font&gt;&lt;/b&gt;方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;4. 否则不是bounceSword，如果是spinSword, 调用&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;SpinLogic()&lt;/font&gt;&lt;/b&gt;方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="482.81562938022944" y="2450.752688172043" width="1096.1599027498808" height="722.0967741935483" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-40" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;BounceSword&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span&gt;&lt;b&gt;SetupTargetsForBounce()&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;/* 如果isBouncing == true &amp;amp;&amp;amp; enemyTarget &amp;lt;= 0 ： 当前enemyTarget list中没有对象, 来判断反弹剑是否是第一次碰撞到敌人，因为每次在设置剑类型为反弹剑时会将敌人列表清空 */ &lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;修正：上面&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;将剑的bounceRadius范围内的敌人Add到&lt;/font&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;enemyTarget&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp; List（无序的）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;BounceLogic()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1. 在update中调用时,让sword的从当前位置向当前敌人List中索引为&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;targetIndex的敌人位置移动；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;2. 如果到达了该敌人位置，则调用&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;SwordSkillDamage()方法，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;targetIndex++ &amp;amp;&amp;amp; bounceAmount--;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;如果 bounceAmount = 0 :&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;isBouncing = false &amp;amp;&amp;amp; isReturning = true; 返回Sword；&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;否则，如果列表遍历完一次，继续从头遍历列表&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="615.4451882143842" y="3424.493225806451" width="830.8920133520223" height="579.8655913978495" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-41" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;private void StuckInto(Collider2D collision)&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果是pierceSword，并且pierceAmount &amp;gt; 0;则将pierceAmount 减一，&lt;b&gt;然后return;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果是spinSword，（不可能是pierceSword），调用StopWhenSpinning(); 让spinSword在攻击到第一个enemy时停在原地; &lt;b&gt;然后return&lt;/b&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 有以下可能：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3.1 是pierceSword，已经贯穿了pierceAmount个敌人，此时pierceAmount = 0；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3.2 不是pierceSword也不是spinSword，则可能是bounceSword/regularSword;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;此时，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（1）.将canRotate = false; 让剑的右侧不再一直指向剑的速度方向;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（2）.将剑的rigibody2D失活，让剑的碰撞体失活;这样以后不会再检测到剑攻击到敌人/墙体&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;（3）.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;将剑的刚体设为Kinematic运动学刚体，不受重力、碰撞等影响，只受代码控制&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;（4）. 停滞剑的一切动作&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;4. 如果是反弹剑，并且敌人列表数量大于1，则return; 这样不会执行后序让剑停止旋转的动画&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;5. 否则，如果不是反弹剑/ 是反弹剑但是敌人列表数量小于等于1，则退出剑旋转动画;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;6. 将剑的parent设为攻击到的敌人，让剑跟随敌人一切移动&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1760.727545915639" y="2523.235887096774" width="1347.3924540843605" height="577.130376344086" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-43" value="&lt;div&gt;&lt;span&gt;public void SetupSword(Vector2 _dir, float _gravityScale)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;rb.velocity = _dir;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;rb.gravityScale = _gravityScale;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;};&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="538.9569816337444" y="579.8655913978496" width="370.53292487319914" height="218.81720430107526" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-44" value="&lt;div&gt;&lt;span&gt;DestryoMe();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ReturnSword(); // 停止剑的rigidbody2D；让剑重新失去parent;isReturning = true;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1122.8270450703003" y="503.2795698924731" width="443.5166828027687" height="191.46505376344084" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-45" value="&lt;div&gt;&lt;span&gt;SetupSword();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/*&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1.给剑的各种公共属性赋值&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2.如果是pierce，会有pierceAmount &amp;gt; 0;此时剑不需要旋转，则在pierceAmount &amp;lt;= 0时，让剑切换到旋转动画&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;3.计算SpinDirection;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1033.0008814646771" y="722.0967741935483" width="561.4135225351502" height="251.63978494623655" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-46" value="&lt;div&gt;&lt;span&gt;SwordSkillDamage(enemy);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// 调用enemy.Damage()方法，启用协程&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;enemy.StartCoroutine(&quot;FreezeTimerFor&quot;, freezeTimeDuration);使敌人停滞&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="460.35908847882365" y="919.0322580645161" width="437.9025475774172" height="147.7016129032258" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-47" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Update();&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;span&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;onTriggerEnter2D();&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1111.598774619597" y="1028.4408602150536" width="314.3915726196841" height="172.31854838709677" as="geometry" />
        </mxCell>
        <mxCell id="gPpyHjLKl8rGHEcK-XGe-49" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;SpinSword&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;// Methods&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;SpinLogic&lt;/span&gt;()&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;/*&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;1. 如果player的位置和sword的位置超过了maxTravelDistance &amp;amp;&amp;amp; !wasStopped剑没有停下来，调用StopWhenSpinning()方法；&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;2. 如果当前Sword已经停止（wasStopped = true），则每帧减少spinTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;如果spinTimer &amp;lt; 0：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;设置isReturning = true &amp;amp;&amp;amp; isSpinning = false;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;3. 更新中每帧减少hitTimer;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;如果hitTimer &amp;lt; 0; 将hitTimer重置为hitCooldown;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;对在Sword的spinRadius范围内的敌人调用&lt;span style=&quot;background-color: transparent;&quot;&gt;SwordSkillDamage()方法;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;注意对于spinSword，在&lt;/span&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-family: &amp;quot;Comic Sans MS&amp;quot;;&quot;&gt;StuckInto()方法中碰撞到敌人时不会将Rigidbody失活&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-family: &amp;quot;Comic Sans MS&amp;quot;;&quot;&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;StopWhenSpinning()&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;/*&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;1. 设置wasStopped = true;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;2. 凝滞Sword的Rigidbody2D;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;3. 如果&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;spinTimer &amp;lt; 0; 设置&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;spinTimer = spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;注意：只有spinSword刚进入停留在原地状态时，更新spinTimer 为spinDuration;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font&gt;*/&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="1760.727545915639" y="3358.844086021505" width="1178.9683973238155" height="711.1559139784946" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-50" value="Sword_Skill_Controller Logic" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="B_nVN4fboFG4_9kOqA88-123" vertex="1">
          <mxGeometry x="2750" y="430" width="820" height="170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-202" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="11630" y="-910" width="1920" height="1860" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-168" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-164" target="B_nVN4fboFG4_9kOqA88-167" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-164" value="Sword_Skill_Controller OnTriggerEnter2D中" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry width="920" height="170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-169" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-167" target="B_nVN4fboFG4_9kOqA88-164" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="980" y="372" />
              <mxPoint x="980" y="85" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-171" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="B_nVN4fboFG4_9kOqA88-169" vertex="1" connectable="0">
          <mxGeometry x="-0.5454" y="-2" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-175" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-167" target="B_nVN4fboFG4_9kOqA88-174" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-183" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="B_nVN4fboFG4_9kOqA88-175" vertex="1" connectable="0">
          <mxGeometry x="-0.1421" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-167" value="如果是返回状态" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="155" y="330" width="610" height="83.75" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-177" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-174" target="B_nVN4fboFG4_9kOqA88-176" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-174" value="对敌人造成伤害；" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="155" y="530" width="610" height="83.75" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-179" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-176" target="B_nVN4fboFG4_9kOqA88-178" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-182" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-176" target="B_nVN4fboFG4_9kOqA88-180" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-176" value="如果是反弹剑并且第一次碰到敌人&lt;div&gt;如果是isBouncing &amp;amp;&amp;amp; enemy.Count &amp;lt;= 0;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="260" y="700" width="400" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-181" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-178" target="B_nVN4fboFG4_9kOqA88-180" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-178" value="调用SetupTargetsForBounce()，为反弹剑寻找是否有反弹敌人列表" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="315" y="855" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-180" value="调用StuckInto(collision);" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="330" y="1010" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-186" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-184" target="B_nVN4fboFG4_9kOqA88-185" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-184" value="StuckInto(collision)中的逻辑" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1120" y="807.5" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-188" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-185" target="B_nVN4fboFG4_9kOqA88-187" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-190" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-185" target="B_nVN4fboFG4_9kOqA88-189" edge="1">
          <mxGeometry x="-0.0059" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-185" value="如果是贯穿剑，且贯穿敌人数&amp;gt;0" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1100" y="940" width="300" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-187" value="剩余贯穿敌人数减一；&lt;div&gt;return；&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1560" y="940" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-193" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-189" target="B_nVN4fboFG4_9kOqA88-192" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-195" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-189" target="B_nVN4fboFG4_9kOqA88-194" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-189" value="如果是旋转剑" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1100" y="1085" width="300" height="80" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-192" value="旋转剑在撞到敌人后调用&lt;span style=&quot;background-color: transparent;&quot;&gt;StopWhenSpinning();方法&lt;/span&gt;&lt;div&gt;然后return;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1570" y="1095" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-197" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-194" target="B_nVN4fboFG4_9kOqA88-196" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-194" value="（到这里，既不是贯穿剑，也不是旋转剑，只能是regular或者反弹剑）&lt;div&gt;1.让剑的方向固定&lt;/div&gt;&lt;div&gt;2.剑的碰撞体失活&lt;/div&gt;&lt;div&gt;3.剑的刚体设为Kinematic&lt;/div&gt;&lt;div&gt;4.冻结剑的刚体&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1090" y="1250" width="320" height="240" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-199" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-196" target="B_nVN4fboFG4_9kOqA88-198" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-201" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-202" source="B_nVN4fboFG4_9kOqA88-196" target="B_nVN4fboFG4_9kOqA88-200" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-196" value="如果是反弹剑 &amp;amp;&amp;amp; 反弹敌人列表数量 &amp;gt; 1" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1120" y="1550" width="260" height="140" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-198" value="return;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1530" y="1590" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-200" value="停止剑的旋转动画；&lt;div&gt;将剑设为碰撞到的敌人的Children,让剑跟随敌人移动&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-202" vertex="1">
          <mxGeometry x="1095" y="1760" width="310" height="100" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-203" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="8110" y="-900" width="3170" height="2324.38" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-131" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-126" target="B_nVN4fboFG4_9kOqA88-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-126" value="Sword_Skill_Controller Update()中" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry width="920" height="170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-130" target="B_nVN4fboFG4_9kOqA88-132" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-147" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-135" vertex="1" connectable="0">
          <mxGeometry x="0.054" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-130" target="B_nVN4fboFG4_9kOqA88-138" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-140" value="Yes&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;fontStyle=1;fontFamily=Lucida Console;" parent="B_nVN4fboFG4_9kOqA88-139" vertex="1" connectable="0">
          <mxGeometry x="-0.0889" y="1" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-130" value="canRotate?&lt;div&gt;(剑尖所指方向是否是速度方向)&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="235" y="360" width="450" height="185" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-132" target="B_nVN4fboFG4_9kOqA88-133" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-148" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-136" vertex="1" connectable="0">
          <mxGeometry x="0.2673" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-146" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontStyle=1;fontSize=20;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-132" target="B_nVN4fboFG4_9kOqA88-145" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-132" value="isReturning?" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="230" y="710" width="460" height="175" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-133" target="B_nVN4fboFG4_9kOqA88-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-149" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-137" vertex="1" connectable="0">
          <mxGeometry x="0.3373" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-142" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-133" target="B_nVN4fboFG4_9kOqA88-141" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-133" value="isBouncing &amp;amp;&amp;amp; enemyTarget.Count &amp;gt; 1&lt;div&gt;是反弹剑 &amp;amp; 敌人列表大于1&amp;nbsp;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="170" y="1125" width="580" height="130" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-144" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=20;fontStyle=1" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-134" target="B_nVN4fboFG4_9kOqA88-143" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-134" value="isSpinning？" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="230" y="1490" width="460" height="175" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-152" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-138" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="459.9999999999982" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="transform.right = rb.velocity;" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-138">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="1155" y="391.87" width="530" height="121.25" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-141" target="B_nVN4fboFG4_9kOqA88-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="执行反弹逻辑&lt;div&gt;BounceLogic();&lt;/div&gt;" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-141">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="1120" y="1101.25" width="640" height="177.5" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-151" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-143" target="B_nVN4fboFG4_9kOqA88-150" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="执行旋转剑逻辑&lt;div&gt;SpinLogic();&lt;/div&gt;" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-143">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="1220" y="1528.13" width="480" height="98.75" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-145" target="B_nVN4fboFG4_9kOqA88-133" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="控制剑返回, MoveTowards()方法；&lt;div&gt;当剑到达player身边时，调用player.CatchSword()方法&lt;/div&gt;" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-145">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="1120" y="740" width="570" height="115" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-150" target="B_nVN4fboFG4_9kOqA88-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-159" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-150" target="B_nVN4fboFG4_9kOqA88-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-150" value="如果剑到达离player最大距离 &amp;amp;&amp;amp;&amp;nbsp;&lt;div&gt;！wasStopped&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="1235" y="1810" width="450" height="180" as="geometry" />
        </mxCell>
        <UserObject label="&lt;div&gt;调用让旋转剑停下的逻辑&lt;/div&gt;StopWhenSpinning();" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-156">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="1950" y="1861.25" width="520" height="77.5" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-163" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-203" source="B_nVN4fboFG4_9kOqA88-158" target="B_nVN4fboFG4_9kOqA88-162" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-158" value="如果剑已经停下&lt;div&gt;wasStopped&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=50;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;fontStyle=1;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
          <mxGeometry x="1220" y="2130" width="480" height="140" as="geometry" />
        </mxCell>
        <UserObject label="&lt;div&gt;调用旋转剑停下时的逻辑：&lt;/div&gt;&lt;div&gt;1. 更新旋转剑停下旋转的计时器及小幅度移动，如果计时器&amp;lt;0; isReturning = true; 准备返回，isSpinning = false;&lt;/div&gt;&lt;div&gt;2.旋转剑停留在原地攻击敌人的逻辑&lt;/div&gt;" link="transform.right = rb.velocity;" id="B_nVN4fboFG4_9kOqA88-162">
          <mxCell style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fontStyle=1;fontFamily=Comic Sans MS;fillColor=#d5e8d4;strokeColor=#82b366;" parent="B_nVN4fboFG4_9kOqA88-203" vertex="1">
            <mxGeometry x="2580" y="2075.63" width="590" height="248.75" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="B_nVN4fboFG4_9kOqA88-281" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="7020" y="-4998.75" width="2680" height="2528.75" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-213" value="各种&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Skills_Controller：MonoBehaviour&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#b0e3e6;strokeColor=#0e8088;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1">
          <mxGeometry x="1900" y="38.75" width="517.5" height="517.5" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-269" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry x="1030" width="610" height="595" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-206" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Skill&lt;/font&gt;:MonoBehaviour&lt;/b&gt;&lt;div&gt;CanUseSkill();&lt;/div&gt;&lt;div&gt;UseSkill();&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#a0522d;fontColor=#ffffff;strokeColor=#6D1F00;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-269" vertex="1">
          <mxGeometry width="610" height="595" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-232" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Player&lt;/font&gt;&lt;/b&gt; player;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-269" vertex="1">
          <mxGeometry x="149.5" y="370" width="311" height="145" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-270" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry x="200" y="28.75" width="656" height="590" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-205" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;SkillManager:MonoBehaviour&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-270" vertex="1">
          <mxGeometry width="656" height="590" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-229" value="static &lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;SkillManager&lt;/font&gt;&lt;/b&gt; instance;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-270" vertex="1">
          <mxGeometry x="90" y="390" width="480" height="150" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-230" value="各种Skills" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#a0522d;fontColor=#ffffff;strokeColor=#6D1F00;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-270" vertex="1">
          <mxGeometry x="210" y="50" width="210" height="210" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-271" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry x="160" y="888.75" width="820" height="450" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-209" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerManager&lt;/font&gt;:MonoBehaviour&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-271" vertex="1">
          <mxGeometry width="820" height="435.9375" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-222" value="&lt;div&gt;&lt;div&gt;static &lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerManager&lt;/font&gt;&lt;/b&gt; instance;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-271" vertex="1">
          <mxGeometry x="280" y="267.1875" width="517.5" height="140.625" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-227" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Player&lt;/font&gt;&lt;/b&gt; player;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-271" vertex="1">
          <mxGeometry x="30" y="267.1875" width="216" height="182.8125" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-272" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry x="1280" y="771.5" width="1400" height="787.25" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-208" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Player&lt;/font&gt;:Entity:MonoBehavior&lt;/b&gt;&lt;div&gt;AssignNewSword();&lt;/div&gt;&lt;div&gt;ExitBlackHoleAbility();&lt;/div&gt;&lt;div&gt;CatchTheSword();&lt;/div&gt;&lt;div&gt;IEnumerator BusyFor();&lt;/div&gt;&lt;div&gt;AnimationTrigger();&lt;/div&gt;&lt;div&gt;CheckForDashInput();&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Update():&lt;/font&gt;&lt;/b&gt;&amp;nbsp;&lt;b&gt;&lt;font face=&quot;Georgia&quot;&gt;stateMachine.currentState.Update();&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;size=0.08333333333333334;fillColor=#cdeb8b;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-272" vertex="1">
          <mxGeometry width="1400" height="737.25" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-214" value="各种&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;State&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-272" vertex="1">
          <mxGeometry x="180" y="627.25" width="460" height="110" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-238" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerStateMachine&lt;/font&gt;&lt;/b&gt;&lt;div&gt;stateMachine;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-272" vertex="1">
          <mxGeometry x="700" y="617.25" width="560" height="170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-279" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry y="1788.75" width="1090" height="740" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-210" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerState&lt;/font&gt;:None&lt;/b&gt;&lt;div&gt;Enter();&lt;/div&gt;&lt;div&gt;Exit();&lt;/div&gt;&lt;div&gt;Update();&lt;/div&gt;&lt;div&gt;AnimationFinishTrigger()&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-279" vertex="1">
          <mxGeometry x="50" y="141.65999999999985" width="990" height="556.69" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-239" value="在其子类的各种State的Update()中，有各种检测满足条件时调用&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;stateMachine.ChangeState(player.xxxState)&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-279" vertex="1">
          <mxGeometry width="1090" height="224.33" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-273" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;Player&lt;/font&gt;&lt;/b&gt; player;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-279" vertex="1">
          <mxGeometry x="170" y="570" width="216" height="130" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-278" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerStateMachine&lt;/font&gt;&lt;/b&gt;&lt;div&gt;stateMachine;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-279" vertex="1">
          <mxGeometry x="480" y="570" width="560" height="170" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-280" value="" style="group" parent="B_nVN4fboFG4_9kOqA88-281" vertex="1" connectable="0">
          <mxGeometry x="1400" y="1818.75" width="1180" height="644.5" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-211" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerStateMachine&lt;/font&gt;:None&lt;/b&gt;&lt;div&gt;Initialize(PlayerState _startState);&lt;/div&gt;&lt;div&gt;ChangeState(PlayerState _newState);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-280" vertex="1">
          <mxGeometry width="1180" height="644.5" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-217" value="&lt;b&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;PlayerState&lt;/font&gt; &lt;/b&gt;currentState" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;container=0;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-280" vertex="1">
          <mxGeometry x="230" y="440" width="718.75" height="110" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-282" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="10960" y="-4700" width="4580" height="1783" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-243" value="Stat:None&lt;div&gt;int baseValue;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;&lt;font style=&quot;color: rgb(255, 1, 43);&quot;&gt;List &amp;lt;int&amp;gt; modifiers;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;int GetValue(): return baseValue + modifiers.value;&lt;/div&gt;&lt;div&gt;void AddModifier();&lt;/div&gt;&lt;div&gt;void RemoveModifier();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry y="530" width="1480" height="523" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-263" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="B_nVN4fboFG4_9kOqA88-282" source="B_nVN4fboFG4_9kOqA88-244" target="B_nVN4fboFG4_9kOqA88-258" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-264" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="B_nVN4fboFG4_9kOqA88-282" source="B_nVN4fboFG4_9kOqA88-244" target="B_nVN4fboFG4_9kOqA88-261" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-244" value="CharacterStats: Monobehaviour&lt;div&gt;int currentHealth;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods&lt;/div&gt;&lt;div&gt;DoDamage(CharacterStats _targetStats);&lt;/div&gt;&lt;div&gt;TakeDamage(int _damage);&lt;/div&gt;&lt;div&gt;Die();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="1715" y="210" width="1480" height="833" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-245" value="Stat damage;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="1840" y="830" width="380" height="223" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-246" value="Stat maxHealth;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="2290" y="830" width="380" height="223" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-247" value="Stat strength;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="2750" y="830" width="380" height="223" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-254" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-282" source="B_nVN4fboFG4_9kOqA88-248" target="B_nVN4fboFG4_9kOqA88-246" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-248" value="PlayerStats&lt;div&gt;override TakeDamage():&lt;/div&gt;&lt;div&gt;{player.DamageEffect();}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="1490" y="1290" width="740" height="493" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-255" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="B_nVN4fboFG4_9kOqA88-282" source="B_nVN4fboFG4_9kOqA88-249" target="B_nVN4fboFG4_9kOqA88-246" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-249" value="EnemyStats&lt;div&gt;overrid TakeDamage():&lt;/div&gt;&lt;div&gt;{Enemy.DamageEffect();}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="2760" y="1290" width="740" height="493" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-252" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Player&lt;/b&gt;&lt;/font&gt; player;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="1756.8999999999996" y="1570" width="206.21" height="103.85" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-253" value="&lt;font face=&quot;Comic Sans MS&quot;&gt;&lt;b&gt;Enemy&lt;/b&gt;&lt;/font&gt;&lt;div&gt;Enemy;&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#cdeb8b;strokeColor=#36393d;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="3040" y="1570" width="206.21" height="103.85" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-258" value="&lt;b&gt;&lt;font face=&quot;Courier New&quot;&gt;DoDamage(CharacterStats _targetStats)&lt;/font&gt;&lt;/b&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;int totalDamage = damage.GetValue() + strength.GetValue();&lt;br&gt;_targetStats.&lt;b&gt;&lt;font face=&quot;Courier New&quot;&gt;TakeDamage(totalDamage);&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="3340" y="240" width="1240" height="401.5" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-261" value="&lt;font style=&quot;&quot; face=&quot;Courier New&quot;&gt;&lt;b&gt;TakeDamage(int _damage)&lt;/b&gt;&lt;/font&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&amp;nbsp;currentHealth -= _damage;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;if (currentHealth &amp;lt; 0)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;Die();&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=50;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="3340" y="740" width="1220" height="373" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-262" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.502;entryY=0.117;entryDx=0;entryDy=0;entryPerimeter=0;" parent="B_nVN4fboFG4_9kOqA88-282" source="B_nVN4fboFG4_9kOqA88-258" target="B_nVN4fboFG4_9kOqA88-261" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B_nVN4fboFG4_9kOqA88-268" value="这里的DoDamage接受一个CharacterStats 类型的参数target;是将自己（this）的damage 对 targetStats的Health造成伤害;&lt;div&gt;在自己的DoDamage中，调用targetStats的TakeDamage()方法&lt;/div&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;size=210;position=0.56;base=92;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;position2=0.32;" parent="B_nVN4fboFG4_9kOqA88-282" vertex="1">
          <mxGeometry x="2450" width="890" height="600" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-11" value="&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;Entity中，注册了事件&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;public System.Action.onFlipped;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;在Entity脚本的Flip()方法中，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;控制角色Flip时，&lt;/b&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;onFlipped ?.Invoke();&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=50;" vertex="1" parent="1">
          <mxGeometry x="11550" y="-6960" width="1240" height="450" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-12" value="&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;CharacterStats脚本中，注册了事件&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;public System.Action.onHealthChanged;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;在CharacterStats的IncreaseHealtyBy方法&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;和DecreaseHealthBy方法中，&lt;/b&gt;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;onHealthChanged?.Invoke();&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=50;" vertex="1" parent="1">
          <mxGeometry x="11510" y="-5940.5" width="1240" height="680" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-15" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="13020" y="-7030" width="2090" height="1890" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-2" value="UI_HealthBar&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Values&lt;/div&gt;&lt;div&gt;RectTransform&amp;nbsp; MyTransform // 血条的transform，用来控制血条的翻转&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//Methods&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;private void UpdateHealthUI() // 更新血条&lt;/div&gt;&lt;div&gt;private void FlipUI() // 翻转血条&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="lwo_E-M_du47u114pg7D-15">
          <mxGeometry y="400" width="2090" height="1420" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-7" value="" style="group" vertex="1" connectable="0" parent="lwo_E-M_du47u114pg7D-15">
          <mxGeometry x="320" y="450" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-4" value="Player player" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;size=70;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;" vertex="1" parent="lwo_E-M_du47u114pg7D-7">
          <mxGeometry width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-5" value="Entity_Status_UI" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=50;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="lwo_E-M_du47u114pg7D-7">
          <mxGeometry x="120" y="10" width="530" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-9" value="Entity_Status_UI本质上是一个UI-Slider，由Slider的Background&lt;div&gt;和Fill Area组成，通过Slider中的Value来控制Fill Area的范围形成血条&lt;/div&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;size=210;position=0.56;base=92;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;fontSize=50;fontStyle=1;fontFamily=Comic Sans MS;position2=0;" vertex="1" parent="lwo_E-M_du47u114pg7D-15">
          <mxGeometry x="1200" width="890" height="600" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-13" value="在UI_HealthBar的Start()中：&lt;div&gt;entity.onFlipped += FlipUI;&lt;/div&gt;&lt;div&gt;myStats.onHealthChanged += UpdateHealthUI;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="lwo_E-M_du47u114pg7D-15">
          <mxGeometry x="100" y="1490" width="780" height="400" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-14" value="在UI_HealthBar的&lt;div&gt;OnDisable()中，&lt;/div&gt;&lt;div&gt;从onFlipped中移除FlipUI;&lt;/div&gt;&lt;div&gt;从onHealthChnaged中移除UpdateHealthUI&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="lwo_E-M_du47u114pg7D-15">
          <mxGeometry x="1020" y="1490" width="1040" height="400" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-16" value="&lt;div&gt;EntityFX&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;// Methods：&lt;/div&gt;&lt;div&gt;public void MakeTransparent(bool _transparent)&amp;nbsp;&lt;/div&gt;&lt;div&gt;// 让角色隐身（用于黑洞技能）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;private IEnumerator FlashFX()；&lt;/div&gt;&lt;div&gt;// 用于控制角色被击中时瞬间白光闪烁；&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;private void RedColorBlink();&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt;&amp;nbsp;在SkeletonStunnedState（敌人被成功反击造成昏迷的状态），&lt;/div&gt;&lt;div&gt;在Enter()方法中，&lt;/div&gt;&lt;div&gt;enemy.fx.InvokeRepeating(&quot;RedColorBlink&quot;, 0, 0.1f);&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;private void&amp;nbsp;&lt;/div&gt;&lt;div&gt;IgniteColorFx() / ShockColorFx() / FrozenColorFx()&lt;/div&gt;&lt;div&gt;分别对应： 点燃时效果 / 感电时效果 / 冻结时效果&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;通过协程中调用效果，例如对于感电效果&lt;/div&gt;&lt;div&gt;&lt;div&gt;public IEnumerator ShockFxFor(float _seconds)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; yield return new WaitForSeconds(flashDuration);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; InvokeRepeating(&quot;ShockColorFx&quot;, 0, 0.3f);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; Invoke(&quot;CancelColorChange&quot;, _seconds);&lt;/div&gt;&lt;div&gt;}；&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=50;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;" vertex="1" parent="1">
          <mxGeometry x="18100" y="-7030" width="2430" height="2210" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-17" value="&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;在CharacterStats脚本中，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;b&gt;对于电系伤害，ApplyShock()方法中，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;&quot;&gt;&lt;font face=&quot;Comic Sans MS&quot;&gt;fx.StartCoroutine(&quot;ShockFxFor&quot;, ailmentDuration);&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=50;" vertex="1" parent="1">
          <mxGeometry x="16350" y="-6720" width="1660" height="560" as="geometry" />
        </mxCell>
        <mxCell id="lwo_E-M_du47u114pg7D-18" value="Clone_Skill 是基础技能" style="triangle;whiteSpace=wrap;html=1;spacingRight=50;spacingBottom=-2;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-840" y="40" width="250" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
